(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-102ce37f"],{"0c23":function(e,t,r){e.exports=r.p+"img/close.3cc1bee2.png"},"3b73":function(e,t,r){},"419b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("收费管理")]),r("el-breadcrumb-item",[e._v("用户费用")])],1),r("el-card",[e.time||e.price?r("el-alert",{attrs:{title:e.status?"您是管理员，可以随意！":"当前已看视频"+e.minute+"分钟"+e.second+"秒，您目前欠费"+e.expense+"元(RMB),请及时缴费!",type:"warning","show-icon":"",closable:!1}}):e._e(),e.programs?r("history",{attrs:{programs:e.programs,id:e.id}}):e._e()],1)],1)},s=[],a=r("5530"),i=(r("96cf"),r("1da1")),c=r("2f62"),o=r("caad"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"block"},[e._m(0),e.programs.length>0?n("div",{staticClass:"program-list"},e._l(e.programs,(function(t,s){return n("div",{key:s,class:["program",{hidelist:e.hidelist===s}]},[n("div",{staticClass:"imgccover"},[n("img",{staticClass:"proimg",attrs:{src:t.cover,alt:t.title}}),n("el-tag",{staticClass:"tag-new",attrs:{effect:"dark",type:s>2?"":"success",size:"mini"}},[e._v(e._s(0===s?"最新":"HD"))]),n("div",{staticClass:"rtop"},[n("img",{staticClass:"close-img",attrs:{src:r("0c23"),alt:""},on:{click:function(r){return e.remove(t._id,s)}}})])],1),n("span",{staticClass:"list-span"},[n("el-tag",{staticClass:"tag",attrs:{effect:"dark",type:s>2?"":"danger",size:"mini"}},[e._v(e._s(s+1))]),e._v(" "+e._s(t.title)+" ")],1)])})),0):n("div",{staticClass:"seen"},[e._v(e._s(this.status?"尊贵的管理员，您可以享受VIP免费服务！":"暂无观看记录"))])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"history"},[r("i",{staticClass:"el-icon-collection-tag"}),r("span",[e._v("观看历史")])])}],p={data:function(){return{hidelist:-1}},created:function(){},props:{programs:{type:Array,defaults:[]},id:{type:String}},methods:{remove:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.$http.delete("/home/rehistory",{params:{_id:e,id:r.id}});case 2:s=n.sent,a=s.data,1===a.code&&(r.hidelist=t,console.log(r.hidelist,t),setTimeout((function(){r.$parent.$parent.getprograms(),r.hidelist=-1}),1e3));case 5:case"end":return n.stop()}}),n)})))()}},computed:Object(a["a"])({},Object(c["c"])(["status"]))},m=p,d=(r("c7d4"),r("2877")),f=Object(d["a"])(m,u,l,!1,null,"22b96dfc",null),g=f.exports,b={data:function(){return{minute:null,second:null,expense:null,username:"",programs:null,time:0,price:0}},components:{history:g},created:function(){this.username=sessionStorage.getItem("username"),this.getprograms()},methods:{computedata:function(){console.log(this.time),this.minute=parseInt(this.time/60),this.second=this.time-60*this.minute,this.expense=this.price},getprograms:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["b"])("/home/users",{username:e.username});case 2:r=t.sent,n=r.data,e.programs=n[0].program.reverse(),console.log(n[0]),e.time=n[0].minutes,e.price=n[0].minute,e.computedata();case 9:case"end":return t.stop()}}),t)})))()}},computed:Object(a["a"])({},Object(c["c"])(["userinfo","status"]),{id:function(){return this.userinfo._id}})},h=b,v=Object(d["a"])(h,n,s,!1,null,"62a94753",null);t["default"]=v.exports},5530:function(e,t,r){"use strict";r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,"a",(function(){return a}))},b64b:function(e,t,r){var n=r("23e7"),s=r("7b0b"),a=r("df75"),i=r("d039"),c=i((function(){a(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return a(s(e))}})},c7d4:function(e,t,r){"use strict";var n=r("3b73"),s=r.n(n);s.a},caad:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return u}));r("d3b7"),r("96cf");var n=r("1da1"),s=r("bc3a"),a=r.n(s),i=r("5c96");a.a.defaults.baseURL="http://127.0.0.1:3000";var c=a.a.create({baseURL:"http://127.0.0.1:3000",timeout:"5000"});c.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return e.headers.common["Authorization"]="Bearer "+t,e}));var o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c({url:t,params:r});case 2:return n=e.sent,s=n.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),u=function(e,t){return new Promise((function(r){i["MessageBox"].confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function n(){var s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(123),n.next=3,a.a.delete(e,{params:t});case 3:if(s=n.sent,c=s.data,console.log(c),0!==c.code){n.next=10;break}return n.abrupt("return",i["Message"].error({showClose:!0,duration:1500,message:"删除失败"}));case 10:if(100!==c.code){n.next=12;break}return n.abrupt("return",i["Message"].error({showClose:!0,duration:1500,message:c.msg}));case 12:return i["Message"].success({showClose:!0,duration:1500,message:"删除成功"}),n.abrupt("return",r(c.code));case 14:case"end":return n.stop()}}),n)})))).catch((function(){i["Message"].info({showClose:!0,duration:1500,message:"已取消"})}))}))}},dbb4:function(e,t,r){var n=r("23e7"),s=r("83ab"),a=r("56ef"),i=r("fc6a"),c=r("06cf"),o=r("8418");n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),s=c.f,u=a(n),l={},p=0;while(u.length>p)r=s(n,t=u[p++]),void 0!==r&&o(l,t,r);return l}})},e439:function(e,t,r){var n=r("23e7"),s=r("d039"),a=r("fc6a"),i=r("06cf").f,c=r("83ab"),o=s((function(){i(1)})),u=!c||o;n({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(e,t){return i(a(e),t)}})}}]);
//# sourceMappingURL=chunk-102ce37f.55f05fd7.js.map